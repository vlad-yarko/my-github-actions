name: Passing Variables Between jobs


on:
  workflow_dispatch:


jobs:
  producer:
    runs-on: ubuntu-24.04

    outputs:
      puppy: ${{ steps.generate-puppy.outputs.puppy }}
    steps:
      - name: Generate and export puppy
        id: generate-puppy
        run: |
          puppy=puppy

          # 1) Step output (for job output)
          echo "puppy=${puppy}" >> "$GITHUB_OUTPUT"

          # 2) Job-scoped environment variable
          echo "PUPPY=${puppy}" >> "$GITHUB_ENV"

      - name: Inspect values inside producer
        run: |
          echo "PUPPY (set via GITHUB_ENV):   $PUPPY"
          echo "puppy (step output):          ${{ steps.generate-puppy.outputs.puppy }}"

  consumer:
    runs-on: ubuntu-24.04
    needs: producer
    steps:
      - name: Inspect values inside consumer (note PUPPY is unset)
        run: |
          echo "Value from producer:        ${{ needs.producer.outputs.puppy }}"
          echo "PUPPY in consumer:            ${PUPPY:-<UNSET>}"
